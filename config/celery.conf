# Celery Configuration for ShopOnline Uganda
# This file contains Celery worker and beat configuration

[program:celery-worker]
command=/app/venv/bin/celery -A shoponline worker --loglevel=info --concurrency=4 --queues=default,flash_sales,orders,payments,notifications,emails
directory=/app
user=django
numprocs=1
stdout_logfile=/app/logs/celery-worker.log
stderr_logfile=/app/logs/celery-worker-error.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
killasgroup=true
priority=998

[program:celery-beat]
command=/app/venv/bin/celery -A shoponline beat --loglevel=info --scheduler django_celery_beat.schedulers:DatabaseScheduler
directory=/app
user=django
numprocs=1
stdout_logfile=/app/logs/celery-beat.log
stderr_logfile=/app/logs/celery-beat-error.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
killasgroup=true
priority=999

[program:celery-flower]
command=/app/venv/bin/celery -A shoponline flower --address=0.0.0.0 --port=5555 --basic_auth=admin:flower123
directory=/app
user=django
numprocs=1
stdout_logfile=/app/logs/celery-flower.log
stderr_logfile=/app/logs/celery-flower-error.log
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=600
killasgroup=true
priority=997

[group:celery]
programs=celery-worker,celery-beat,celery-flower
priority=999